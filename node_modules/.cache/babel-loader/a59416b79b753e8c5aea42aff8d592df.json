{"ast":null,"code":"var _jsxFileName = \"/Users/terezadankova/Desktop/GitHub/u3-d6/src/Components/CommentArea.jsx\";\nimport { Component } from 'react';\nimport CommentList from './CommentList';\nimport AddComment from './AddComment';\nimport Loading from '../Components2/Loading';\nimport Error from '../Components2/Error';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass CommentArea extends Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      comments: [],\n      isLoading: false,\n      isError: false\n    };\n\n    this.fetchComments = async () => {\n      this.setState({\n        isLoading: true\n      });\n\n      try {\n        const response = await fetch('https://striveschool-api.herokuapp.com/api/comments/' + this.props.asin, {\n          headers: {\n            Authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2MzA3YTZiMzFlYjc2ZDAwMTUxNTAyNDgiLCJpYXQiOjE2NjI2MzU5NTUsImV4cCI6MTY2Mzg0NTU1NX0.Sxfd0UiSLfePsqw61xi9cF1H4BolbnnnXU9ZIOmNft0'\n          }\n        });\n        console.log(response);\n\n        if (response.ok) {\n          const comments = await response.json();\n          console.log(comments);\n          this.setState({\n            comments: comments,\n            isLoading: false,\n            isError: false\n          });\n        } else {\n          console.log('error');\n          this.setState({\n            isLoading: false,\n            isError: true\n          });\n        }\n      } catch (error) {\n        console.log(error);\n        this.setState({\n          isLoading: false,\n          isError: true\n        });\n      }\n    };\n\n    this.componentDidUpdate = async prevProps => {\n      console.log(\"Changed asin from \" + prevProps.asin + \" to \" + this.props.asin);\n\n      if (prevProps.asin !== this.props.asin) {\n        this.fetchComments();\n      }\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [this.state.isLoading && /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 38\n      }, this), this.state.isError && /*#__PURE__*/_jsxDEV(Error, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 36\n      }, this), /*#__PURE__*/_jsxDEV(AddComment, {\n        asin: this.props.asin,\n        didAddComment: () => this.fetchComments()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(CommentList, {\n        commentShow: this.state.comments,\n        didDelete: () => this.fetchComments()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 9\n    }, this);\n  }\n\n}\n\nexport default CommentArea;","map":{"version":3,"names":["Component","CommentList","AddComment","Loading","Error","CommentArea","state","comments","isLoading","isError","fetchComments","setState","response","fetch","props","asin","headers","Authorization","console","log","ok","json","error","componentDidUpdate","prevProps","render"],"sources":["/Users/terezadankova/Desktop/GitHub/u3-d6/src/Components/CommentArea.jsx"],"sourcesContent":["import {Component} from 'react'\nimport CommentList from './CommentList'\nimport AddComment from './AddComment'\nimport Loading from '../Components2/Loading'\nimport Error from '../Components2/Error'\n\nclass CommentArea extends Component {\n\n    state = {\n            comments: [],\n            isLoading: false,\n            isError: false\n           }\n\n    fetchComments = async () => {\n        this.setState({\n            isLoading: true\n        })\n        try { \n            const response = await fetch('https://striveschool-api.herokuapp.com/api/comments/' + this.props.asin, {\n            headers: { Authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2MzA3YTZiMzFlYjc2ZDAwMTUxNTAyNDgiLCJpYXQiOjE2NjI2MzU5NTUsImV4cCI6MTY2Mzg0NTU1NX0.Sxfd0UiSLfePsqw61xi9cF1H4BolbnnnXU9ZIOmNft0'\n            }})\n            console.log(response)\n        if (response.ok){\n            const comments = await response.json();\n            console.log(comments)\n            this.setState({comments: comments , isLoading:false, isError: false})\n        }\n        else {\n            console.log('error')\n            this.setState({ isLoading:false , isError: true})\n        }}\n        catch(error){ console.log(error) \n            this.setState({ isLoading:false , isError: true})\n        }\n    }\n\n    componentDidUpdate = async (prevProps) => {\n       console.log(\"Changed asin from \" + prevProps.asin + \" to \" + this.props.asin);\n        if (prevProps.asin !== this.props.asin) {\n            this.fetchComments()\n        }\n    }\n\n\n    render() {\n        return (\n        <div>\n            {this.state.isLoading && <Loading />}\n            {this.state.isError && <Error />}\n            <AddComment asin={this.props.asin} didAddComment={() => this.fetchComments()} />\n            <CommentList commentShow={this.state.comments} didDelete={() => this.fetchComments()}/>\n        </div>\n    )}\n}\n\nexport default CommentArea"],"mappings":";AAAA,SAAQA,SAAR,QAAwB,OAAxB;AACA,OAAOC,WAAP,MAAwB,eAAxB;AACA,OAAOC,UAAP,MAAuB,cAAvB;AACA,OAAOC,OAAP,MAAoB,wBAApB;AACA,OAAOC,KAAP,MAAkB,sBAAlB;;;AAEA,MAAMC,WAAN,SAA0BL,SAA1B,CAAoC;EAAA;IAAA;IAAA,KAEhCM,KAFgC,GAExB;MACAC,QAAQ,EAAE,EADV;MAEAC,SAAS,EAAE,KAFX;MAGAC,OAAO,EAAE;IAHT,CAFwB;;IAAA,KAQhCC,aARgC,GAQhB,YAAY;MACxB,KAAKC,QAAL,CAAc;QACVH,SAAS,EAAE;MADD,CAAd;;MAGA,IAAI;QACA,MAAMI,QAAQ,GAAG,MAAMC,KAAK,CAAC,yDAAyD,KAAKC,KAAL,CAAWC,IAArE,EAA2E;UACvGC,OAAO,EAAE;YAAEC,aAAa,EAAE;UAAjB;QAD8F,CAA3E,CAA5B;QAGAC,OAAO,CAACC,GAAR,CAAYP,QAAZ;;QACJ,IAAIA,QAAQ,CAACQ,EAAb,EAAgB;UACZ,MAAMb,QAAQ,GAAG,MAAMK,QAAQ,CAACS,IAAT,EAAvB;UACAH,OAAO,CAACC,GAAR,CAAYZ,QAAZ;UACA,KAAKI,QAAL,CAAc;YAACJ,QAAQ,EAAEA,QAAX;YAAsBC,SAAS,EAAC,KAAhC;YAAuCC,OAAO,EAAE;UAAhD,CAAd;QACH,CAJD,MAKK;UACDS,OAAO,CAACC,GAAR,CAAY,OAAZ;UACA,KAAKR,QAAL,CAAc;YAAEH,SAAS,EAAC,KAAZ;YAAoBC,OAAO,EAAE;UAA7B,CAAd;QACH;MAAC,CAbF,CAcA,OAAMa,KAAN,EAAY;QAAEJ,OAAO,CAACC,GAAR,CAAYG,KAAZ;QACV,KAAKX,QAAL,CAAc;UAAEH,SAAS,EAAC,KAAZ;UAAoBC,OAAO,EAAE;QAA7B,CAAd;MACH;IACJ,CA7B+B;;IAAA,KA+BhCc,kBA/BgC,GA+BX,MAAOC,SAAP,IAAqB;MACvCN,OAAO,CAACC,GAAR,CAAY,uBAAuBK,SAAS,CAACT,IAAjC,GAAwC,MAAxC,GAAiD,KAAKD,KAAL,CAAWC,IAAxE;;MACC,IAAIS,SAAS,CAACT,IAAV,KAAmB,KAAKD,KAAL,CAAWC,IAAlC,EAAwC;QACpC,KAAKL,aAAL;MACH;IACJ,CApC+B;EAAA;;EAuChCe,MAAM,GAAG;IACL,oBACA;MAAA,WACK,KAAKnB,KAAL,CAAWE,SAAX,iBAAwB,QAAC,OAAD;QAAA;QAAA;QAAA;MAAA,QAD7B,EAEK,KAAKF,KAAL,CAAWG,OAAX,iBAAsB,QAAC,KAAD;QAAA;QAAA;QAAA;MAAA,QAF3B,eAGI,QAAC,UAAD;QAAY,IAAI,EAAE,KAAKK,KAAL,CAAWC,IAA7B;QAAmC,aAAa,EAAE,MAAM,KAAKL,aAAL;MAAxD;QAAA;QAAA;QAAA;MAAA,QAHJ,eAII,QAAC,WAAD;QAAa,WAAW,EAAE,KAAKJ,KAAL,CAAWC,QAArC;QAA+C,SAAS,EAAE,MAAM,KAAKG,aAAL;MAAhE;QAAA;QAAA;QAAA;MAAA,QAJJ;IAAA;MAAA;MAAA;MAAA;IAAA,QADA;EAOF;;AA/C8B;;AAkDpC,eAAeL,WAAf"},"metadata":{},"sourceType":"module"}