{"ast":null,"code":"var _jsxFileName = \"/Users/terezadankova/Desktop/GitHub/u3-d6/src/Components/CommentArea.jsx\";\nimport { Component } from 'react';\nimport CommentList from './CommentList';\nimport AddComment from './AddComment';\nimport Loading from '../Components2/Loading';\nimport Error from '../Components2/Error';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass CommentArea extends Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      comments: [],\n      isLoading: false,\n      isError: false,\n      alert: {\n        variant: \"\",\n        message: \"\"\n      }\n    };\n\n    this.componentDidUpdate = async prevProps => {\n      if (prevProps.asin !== this.props.asin) {\n        this.setState({\n          isLoading: true\n        });\n\n        try {\n          const response = await fetch('https://striveschool-api.herokuapp.com/api/comments/' + this.props.asin, {\n            headers: {\n              Authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2MzA3YTZiMzFlYjc2ZDAwMTUxNTAyNDgiLCJpYXQiOjE2NjI2MzU5NTUsImV4cCI6MTY2Mzg0NTU1NX0.Sxfd0UiSLfePsqw61xi9cF1H4BolbnnnXU9ZIOmNft0'\n            }\n          });\n          console.log(response);\n\n          if (response.ok) {\n            const comments = await response.json();\n\n            if (comments.length === 0) {\n              console.log(\"no comments\");\n              this.setState({\n                errorOccurred: true,\n                alert: {\n                  variant: \"info\",\n                  message: \"No Comments Yet\"\n                }\n              });\n            }\n\n            this.setState({\n              comments: comments,\n              isLoading: false,\n              isError: false\n            });\n          } else {\n            console.log('error');\n            this.setState({\n              isLoading: false,\n              isError: true\n            });\n          }\n        } catch (error) {\n          console.log(error);\n          this.setState({\n            isLoading: false,\n            isError: true\n          });\n        }\n      }\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [this.state.isLoading && /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 38\n      }, this), this.state.isError && /*#__PURE__*/_jsxDEV(Error, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 36\n      }, this), /*#__PURE__*/_jsxDEV(AddComment, {\n        asin: this.props.asin\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(CommentList, {\n        commentShow: this.state.comments\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 9\n    }, this);\n  }\n\n}\n\nexport default CommentArea;","map":{"version":3,"names":["Component","CommentList","AddComment","Loading","Error","CommentArea","state","comments","isLoading","isError","alert","variant","message","componentDidUpdate","prevProps","asin","props","setState","response","fetch","headers","Authorization","console","log","ok","json","length","errorOccurred","error","render"],"sources":["/Users/terezadankova/Desktop/GitHub/u3-d6/src/Components/CommentArea.jsx"],"sourcesContent":["import {Component} from 'react'\nimport CommentList from './CommentList'\nimport AddComment from './AddComment'\nimport Loading from '../Components2/Loading'\nimport Error from '../Components2/Error'\n\nclass CommentArea extends Component {\n\n    state = {\n            comments: [],\n            isLoading: false,\n            isError: false,\n            alert: { variant: \"\", message: \"\" },\n           }\n           \n    componentDidUpdate = async (prevProps) => {\n       \n        if (prevProps.asin !== this.props.asin) {\n            this.setState({\n                isLoading: true\n            })\n            try { \n                const response = await fetch('https://striveschool-api.herokuapp.com/api/comments/' + this.props.asin, {\n                headers: { Authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2MzA3YTZiMzFlYjc2ZDAwMTUxNTAyNDgiLCJpYXQiOjE2NjI2MzU5NTUsImV4cCI6MTY2Mzg0NTU1NX0.Sxfd0UiSLfePsqw61xi9cF1H4BolbnnnXU9ZIOmNft0'\n                }})\n                console.log(response)\n            if (response.ok){\n               \n                const comments = await response.json();\n                if (comments.length === 0) {\n                    console.log(\"no comments\");\n                    this.setState({\n                        errorOccurred: true,\n                        alert: { variant: \"info\", message: \"No Comments Yet\" },\n                      });\n                }\n                this.setState({comments: comments , isLoading:false, isError: false})\n\n               \n            }\n            else {\n                console.log('error')\n                this.setState({ isLoading:false , isError: true})\n            }}\n            catch(error){ console.log(error) \n                this.setState({ isLoading:false , isError: true})\n            }\n        }\n    }\n    \n    render() {\n        return (\n        <div>\n            {this.state.isLoading && <Loading />}\n            {this.state.isError && <Error />}\n            <AddComment asin={this.props.asin}/>\n            <CommentList commentShow={this.state.comments}/>\n        </div>\n    )}\n}\n\nexport default CommentArea"],"mappings":";AAAA,SAAQA,SAAR,QAAwB,OAAxB;AACA,OAAOC,WAAP,MAAwB,eAAxB;AACA,OAAOC,UAAP,MAAuB,cAAvB;AACA,OAAOC,OAAP,MAAoB,wBAApB;AACA,OAAOC,KAAP,MAAkB,sBAAlB;;;AAEA,MAAMC,WAAN,SAA0BL,SAA1B,CAAoC;EAAA;IAAA;IAAA,KAEhCM,KAFgC,GAExB;MACAC,QAAQ,EAAE,EADV;MAEAC,SAAS,EAAE,KAFX;MAGAC,OAAO,EAAE,KAHT;MAIAC,KAAK,EAAE;QAAEC,OAAO,EAAE,EAAX;QAAeC,OAAO,EAAE;MAAxB;IAJP,CAFwB;;IAAA,KAShCC,kBATgC,GASX,MAAOC,SAAP,IAAqB;MAEtC,IAAIA,SAAS,CAACC,IAAV,KAAmB,KAAKC,KAAL,CAAWD,IAAlC,EAAwC;QACpC,KAAKE,QAAL,CAAc;UACVT,SAAS,EAAE;QADD,CAAd;;QAGA,IAAI;UACA,MAAMU,QAAQ,GAAG,MAAMC,KAAK,CAAC,yDAAyD,KAAKH,KAAL,CAAWD,IAArE,EAA2E;YACvGK,OAAO,EAAE;cAAEC,aAAa,EAAE;YAAjB;UAD8F,CAA3E,CAA5B;UAGAC,OAAO,CAACC,GAAR,CAAYL,QAAZ;;UACJ,IAAIA,QAAQ,CAACM,EAAb,EAAgB;YAEZ,MAAMjB,QAAQ,GAAG,MAAMW,QAAQ,CAACO,IAAT,EAAvB;;YACA,IAAIlB,QAAQ,CAACmB,MAAT,KAAoB,CAAxB,EAA2B;cACvBJ,OAAO,CAACC,GAAR,CAAY,aAAZ;cACA,KAAKN,QAAL,CAAc;gBACVU,aAAa,EAAE,IADL;gBAEVjB,KAAK,EAAE;kBAAEC,OAAO,EAAE,MAAX;kBAAmBC,OAAO,EAAE;gBAA5B;cAFG,CAAd;YAIH;;YACD,KAAKK,QAAL,CAAc;cAACV,QAAQ,EAAEA,QAAX;cAAsBC,SAAS,EAAC,KAAhC;cAAuCC,OAAO,EAAE;YAAhD,CAAd;UAGH,CAbD,MAcK;YACDa,OAAO,CAACC,GAAR,CAAY,OAAZ;YACA,KAAKN,QAAL,CAAc;cAAET,SAAS,EAAC,KAAZ;cAAoBC,OAAO,EAAE;YAA7B,CAAd;UACH;QAAC,CAtBF,CAuBA,OAAMmB,KAAN,EAAY;UAAEN,OAAO,CAACC,GAAR,CAAYK,KAAZ;UACV,KAAKX,QAAL,CAAc;YAAET,SAAS,EAAC,KAAZ;YAAoBC,OAAO,EAAE;UAA7B,CAAd;QACH;MACJ;IACJ,CA1C+B;EAAA;;EA4ChCoB,MAAM,GAAG;IACL,oBACA;MAAA,WACK,KAAKvB,KAAL,CAAWE,SAAX,iBAAwB,QAAC,OAAD;QAAA;QAAA;QAAA;MAAA,QAD7B,EAEK,KAAKF,KAAL,CAAWG,OAAX,iBAAsB,QAAC,KAAD;QAAA;QAAA;QAAA;MAAA,QAF3B,eAGI,QAAC,UAAD;QAAY,IAAI,EAAE,KAAKO,KAAL,CAAWD;MAA7B;QAAA;QAAA;QAAA;MAAA,QAHJ,eAII,QAAC,WAAD;QAAa,WAAW,EAAE,KAAKT,KAAL,CAAWC;MAArC;QAAA;QAAA;QAAA;MAAA,QAJJ;IAAA;MAAA;MAAA;MAAA;IAAA,QADA;EAOF;;AApD8B;;AAuDpC,eAAeF,WAAf"},"metadata":{},"sourceType":"module"}